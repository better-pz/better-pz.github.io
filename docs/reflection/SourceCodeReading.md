# 源码阅读的思考

要优化好文史关系图的操作体验感,便要从源码的角度出发,阅读庞大的源码是往往会出现无从下手的情况;对于阅读常见用的框架的源码可以学习到优秀框架和常用插件的设计思想以及优秀的逻辑代码的实现,对自己的代码逻辑能力提升有很大的帮助,在项目中能够借鉴到更能提升项目的代码水平,所以掌握良好的源码的阅读习惯是至关重要的,对于阅读源码以及对源码进行修改做了些总结和思考!

## 明确为什么要源码阅读-以问题驱动

很多同学都有意识去学习源码,但是实际上很多同学就是**为了阅读源码而去阅读源码**,没有实际的目的,**所以就产生不出什么实际的意义**,市面上也有很多源码解析的文章与书籍,比如前端常用的 vue 框架的源码,多多少少的前端的同学都有阅读过 vue 的源码,当然大家对阅读 vue 源码的目的各有不同,比如我学习的时候是**带着好奇**想知道 vue 的数据响应式是怎么实现的,便尝试去学习 vue 的源码,在项目中因为**业务需要去**对源码源码做一些更改,需要去做一些更改

看源码更多是为了**兴趣学习和解决问题**,很多的开源项目的代码没有什么特别之处,源码体积一般都比较庞大,如果没有带着问题和目的去阅读,往往只能是**徒劳**,逐渐**迷失**在茫茫的源码中,浪费了时间没有还没有解决实际的问题!

## 如何高效阅读

### 渐进式阅读

明确了为什么要去阅读源码,还值得思考的就是如何高效的阅读呢?很多同学在刚开始阅读的时候会感到无从下手，整个逻辑也很混乱，这个问题很多阅读过源码的同学也自己思考过,在源码阅读中,利用渐进式的方式来阅读可以很好的达成自己阅读源码目的

**什么是渐进式?**

`vue`就是一个渐进式的框架,借鉴对`vue`的`渐进式`的思考,我理解为渐进式思维，指循序渐进的思维方式。这种思维方式强调不论实现什么样的目的，不论做什么事情，都要逐步地、由点到面地、由表及里地、由浅入深地、由小处到大处地进行。这种思维方式反对一哄而上、四面出击，一刀切。那我们怎么对源码渐进式进行渐进式的阅读呢?

**源码如何渐进式阅读?**
对于源码阅读采用渐进式的思维,我们也应该是**由点到面**，**由浅入深**，以及**由小到大**的进行。
还是以 vue 源码阅读为例，想了解 vue 虚拟 dom 和 diff 算法的原理的去阅读源码的时候，我们从这个点出发，找到 vue 源码中 diff 算法的核心函数代码，如源码中的 `patch`函数，再根据该函数中所调用的其他功能函数，去分别阅读不同的函数，按照这个思路来阅读能够提高整个阅读的效率

### 程序流程图/思维导图

做好程序流程分析图或者思维导图可以很好地梳理源码逻辑,理清楚源码中的各个方法的实际作用,同时做好记录,下次再看的时候可以直接对着流程图查阅便可以快速上手，比如如下的程序流程图，是我在学习 diff 算法的源码的时候的逻辑梳理整理，梳理完整个逻辑的时候可以加深整个逻辑的理解。

### 一些技巧

1. 在你阅读的过程中，如果发现一些代码片段很精妙的可以记录一下，或者尝试下有没有更好的方式去实现
2. 大胆猜测，在很多源码中,我们可能刚开始找不到我们想要的代码,这个时候我们可以大胆猜测,然后逐步验证,猜测的时候其实是自己来实现的话是怎么样的思路,在验证的时候发现源码做的有比自己的想法好的,可以学习借鉴,发现不如自己的思路的也可以总结学习并提出自己的建议;
3. 要学会给项目打断点，在边读边运行项目源码的过程中，通过断点输出当前执行的堆栈信息对你理解项目也是有很大的帮助;

## 总结

我们在源码的阅读的时候首先要明确自己的目的,带着目的和问题来进行渐进式的阅读,阅读过程中积极列出自己程序流程图和思维导图,过程中也要积极记录优秀的代码,大胆猜测,积极思考自己的想法!
